---
- name: deleting the line from /sapmnt/sidid/profile/SL2_ERS_gcpsapers
  lineinfile:
    path: /sapmnt/{{ sap_nw_ascs_sid }}/profile/{{ sap_nw_ascs_sid }}_ERS{{ sap_nw_ers_instance_number }}_{{ sap_nw_ers_virtual_host }}
    line: "{{ item }}"
    state: absent
  with_items:
    - 'Restart_Program_00 = local $(_ER) pf=$(_PFL) NR=$(SCSID)'
    - 'Autostart = 1'
#    with_items:
#      - 'Restart_Program_01 = local $(_EN) pf=$(_PF)'
- name: Adding line from /sapmnt/sidid/profile/SL2_ERS_gcpsapers
  lineinfile:
    path: /sapmnt/{{ sap_nw_ascs_sid }}/profile/{{ sap_nw_ascs_sid }}_ERS{{ sap_nw_ers_instance_number }}_{{ sap_nw_ers_virtual_host }}
    line: "{{ item }}"
    state: present
  with_items:
    - 'Start_Program_00 = local $(_ER) pf=$(_PFL) NR=$(SCSID)'
    - 'service/halib = $(DIR_CT_RUN)/saphascriptco.so'
    - 'service/halib_cluster_connector = /usr/bin/sap_suse_cluster_connector'

- name: Adding line from /usr/sap/sapservices
  lineinfile:
    path: /usr/sap/sapservices
    line: "{{ item }}"
    state: present
  with_items:
    - 'LD_LIBRARY_PATH=/usr/sap/{{ sap_nw_ascs_sid }}/ASCS{{ sap_nw_ascs_instance_number }}/exe:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH; /usr/sap/{{ sap_nw_ascs_sid }}/ASCS{{ sap_nw_ascs_instance_number }}/exe/sapstartsrv pf=/usr/sap/{{ sap_nw_ascs_sid }}/SYS/profile/{{ sap_nw_ascs_sid }}_ASCS{{ sap_nw_ascs_instance_number }}_{{ sap_nw_ascs_virtual_host }} -D -u {{ sap_nw_user }}'
